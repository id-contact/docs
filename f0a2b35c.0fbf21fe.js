(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{88:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return r})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return p}));var i=n(3),o=n(7),a=(n(0),n(94)),s={id:"full",title:"Full ID Contact session",sidebar_label:"Full",slug:"full"},r={unversionedId:"sessions/full",id:"sessions/full",isDocsHomePage:!1,title:"Full ID Contact session",description:"A full ID Contact session consists of 3 steps. This section intends to describe those steps from the perspective of the session initiator, outline it's responsibilities and protocol messages. Details on the plugin interactions in the ID Contact session can be found in the communication plugin and the authentication plugin documentation.",source:"@site/docs/sessions/full.md",slug:"/sessions/full",permalink:"/sessions/full",version:"current",sidebar_label:"Full",sidebar:"docs",previous:{title:"Purposes",permalink:"/concepts/purposes"},next:{title:"Authenticating during a communication session",permalink:"/sessions/auth_during_comm"}},c=[{value:"Session overview",id:"session-overview",children:[]},{value:"Requesting authentication and communication options",id:"requesting-authentication-and-communication-options",children:[]},{value:"Initiating session",id:"initiating-session",children:[]}],l={toc:c};function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(i.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"A full ID Contact session consists of 3 steps. This section intends to describe those steps from the perspective of the session initiator, outline it's responsibilities and protocol messages. Details on the plugin interactions in the ID Contact session can be found in the ",Object(a.b)("a",{parentName:"p",href:"/comm/overview"},"communication plugin")," and the ",Object(a.b)("a",{parentName:"p",href:"/auth/overview"},"authentication plugin")," documentation."),Object(a.b)("h2",{id:"session-overview"},"Session overview"),Object(a.b)("p",null,"A full session consists of three major parts:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"End user choice gathering and initiation"),Object(a.b)("li",{parentName:"ol"},"Authentication"),Object(a.b)("li",{parentName:"ol"},"Communication")),Object(a.b)("p",null,"Step 1 starts at the point where an end user has indicated a desire to communicate for a given purpose. At this point, the initiator software queries the core for the options for authentication and communication methods. It then has the end user choose the desired communication and authentication methods, and passes those choices through to the core. Its responsibilities end at this point with transference of the end user to the authentication plugin using the URL provided by the core."),Object(a.b)("p",null,"Step 2 consists of the end user authenticating themselves to the authentication plugins. At the end of this process, the authentication plugin provides the results of the authentication to the communication plugin, and hands the end user over using the URL(s) provided by the core."),Object(a.b)("p",null,"In Step 3 the communication plugin is finally responsible for setting up a communication channel between end user and a customer service agent, as well as providing the customer service agent with the necessary authentication results as provided by the authentication plugin."),Object(a.b)("p",null,"The initiators responsibilities for the session stops after step 1 of the above process. Below, we will go into details on the steps needed to be taken by the initiator during the choice gathering and initiation step."),Object(a.b)("h2",{id:"requesting-authentication-and-communication-options"},"Requesting authentication and communication options"),Object(a.b)("p",null,"At the start of step 1, the end user has indicated in some way interest in communicating for a specified purpose. The first step for the initiator software is to fetch a list of authentication and communication options. For this, the initiator can use the core's ",Object(a.b)("a",{parentName:"p",href:"../core_api"},Object(a.b)("inlineCode",{parentName:"a"},"session_options")," endpoint"),". For example, if the indicated purpose were ",Object(a.b)("inlineCode",{parentName:"p"},"personal_question"),", the initiator would send a get request:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-http"},"GET /session_options/personal_question HTTP/1.0\nHost: core:8000\nConnection: close\naccept: */*\naccept-encoding: gzip, deflate, br\naccept-language: en-US,en;q=0.9\n")),Object(a.b)("p",null,"And get a response similar to"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-http"},'HTTP/1.0 200 OK\ncontent-type: application/json\nserver: Rocket\ncontent-length: 288\ndate: Thu, 01 Jul 2021 08:27:43 GMT\n\n{\n    "auth_methods":[\n        {\n            "tag":"irma",\n            "name":"IRMA",\n            "image_path":"/static/irma.svg"\n        },\n        {\n            "tag":"digid",\n            "name":"DigiD",\n            "image_path":"/static/digid.svg"\n        }\n    ],\n    "comm_methods":[\n        {\n            "tag":"call",\n            "name":"Call",\n            "image_path":"/static/phone.svg"\n        },\n        {\n            "tag":"chat",\n            "name":"Chat",\n            "image_path":"/static/chat.svg"\n        }\n    ]\n}\n')),Object(a.b)("h2",{id:"initiating-session"},"Initiating session"),Object(a.b)("p",null,"The initiator then presents the authentication and communication options to the end user and lets them choose their preferred authentication and communication method. Once this has been completed and the end user has indicated to start the actual session, the initiator uses the core's ",Object(a.b)("a",{parentName:"p",href:"../core_api"},Object(a.b)("inlineCode",{parentName:"a"},"start")," endpoint"),". Continuing the above example, if the end user has chosen the ",Object(a.b)("inlineCode",{parentName:"p"},"irma")," authentication method and the ",Object(a.b)("inlineCode",{parentName:"p"},"chat")," communication method, the initiator then sends the core"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-http"},'POST /start HTTP/1.0\nHost: core:8000\nConnection: close\nContent-Length: 73\naccept: application/json\ncontent-type: application/json\naccept-encoding: gzip, deflate, br\naccept-language: en-US,en;q=0.9\n\n{\n    "auth_method":"irma",\n    "comm_method":"chat",\n    "purpose":"personal_question"\n}\n')),Object(a.b)("p",null,"and will get a response similar to"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},'HTTP/1.0 200 OK\ncontent-type: application/json\nserver: Rocket\ncontent-length: 388\ndate: Thu, 01 Jul 2021 08:31:12 GMT\n\n{\n    "client_url":"https://auth-irma.idcontact.test.tweede.golf/auth/eyJ1IjoiaHR0cHM6Ly9pcm1hLXNlcnZlci5pZGNvbnRhY3QudGVzdC50d2VlZGUuZ29sZi9pcm1hL3Nlc3Npb24vUmdxamZqVHdKNHpmNEJFTzJMZzMiLCJpcm1hcXIiOiJkaXNjbG9zaW5nIn0=/aHR0cHM6Ly93aWRnZXQuY29tbS1tYXRyaXguaWRjb250YWN0LnRlc3QudHdlZWRlLmdvbGYvP3Nlc3Npb249NWUwOTJmNGJmNDIyZDY1OWEyODU5MTVjMGU3Mjk1MWFmODA4MGZkOWVhNDI0YjIwZTgwOWNiMjRiMDI5NWE4Mw=="\n}\n')),Object(a.b)("p",null,"After receiving this response the initiator finally is responsible for redirecting the end user to the given ",Object(a.b)("inlineCode",{parentName:"p"},"client_url"),", after which the initiators involvement in the session ceases."))}p.isMDXComponent=!0},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var i=n(0),o=n.n(i);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),p=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=p(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=p(n),d=i,m=u["".concat(s,".").concat(d)]||u[d]||h[d]||a;return n?o.a.createElement(m,r(r({ref:t},l),{},{components:n})):o.a.createElement(m,r({ref:t},l))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,s=new Array(a);s[0]=d;var r={};for(var c in t)hasOwnProperty.call(t,c)&&(r[c]=t[c]);r.originalType=e,r.mdxType="string"==typeof e?e:i,s[1]=r;for(var l=2;l<a;l++)s[l]=n[l];return o.a.createElement.apply(null,s)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);