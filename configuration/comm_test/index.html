<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ID-Contact Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ID-Contact Blog Atom Feed"><title data-react-helmet="true">Communication test plugin configuration options | ID-Contact</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Communication test plugin configuration options | ID-Contact"><meta data-react-helmet="true" name="description" content="This document describes the configuration options available for the communication test plugin. A complete sample configuration can be found in the plugin&#x27;s github repository. For a guide on how to set up this plugin in an ID Contact development setup, see the setup guide."><meta data-react-helmet="true" property="og:description" content="This document describes the configuration options available for the communication test plugin. A complete sample configuration can be found in the plugin&#x27;s github repository. For a guide on how to set up this plugin in an ID Contact development setup, see the setup guide."><meta data-react-helmet="true" property="og:url" content="https://docs.idcontact.nl/configuration/comm_test"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.idcontact.nl/configuration/comm_test"><link rel="stylesheet" href="/styles.d37612c9.css">
<link rel="preload" href="/styles.86abdcb7.js" as="script">
<link rel="preload" href="/runtime~main.61a81c9d.js" as="script">
<link rel="preload" href="/main.f777b766.js" as="script">
<link rel="preload" href="/2.0732aa58.js" as="script">
<link rel="preload" href="/3.71af52dc.js" as="script">
<link rel="preload" href="/27.af86968c.js" as="script">
<link rel="preload" href="/935f2afb.fed1a0dc.js" as="script">
<link rel="preload" href="/17896441.30863bfd.js" as="script">
<link rel="preload" href="/787f56f8.284e992b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><strong class="navbar__title">ID-Contact</strong></a><a class="navbar__item navbar__link" href="/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">ID-Contact</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Docs</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">ID Contact</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/attributes">Attributes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/purposes">Purposes</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Sessions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sessions/full">Full</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sessions/auth_during_comm">Authentication during communication</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/core_api">Core API</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Authentication Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/auth/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/auth/tech_example">Sample interaction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/auth/api">API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Communication Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/comm/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/comm/tech_example">Sample interaction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/comm/api">API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Sample Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sample_plugins/amazon_connect">Amazon Connect (telephony)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sample_plugins/digid">DigiD</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/setup">Local testing setup</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">ID Contact configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/configuration/core">Core</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/configuration/auth_test">Authentication test plugin</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/configuration/comm_test">Communication test plugin</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Communication test plugin configuration options</h1></header><div class="markdown"><p>This document describes the configuration options available for the communication test plugin. A complete sample configuration can be found in the plugin&#x27;s <a href="https://github.com/id-contact/comm-test/config.sample.toml" target="_blank" rel="noopener noreferrer">github repository</a>. For a guide on how to set up this plugin in an ID Contact development setup, see the <a href="/setup">setup guide</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="general-configuration-structure"></a>General configuration structure<a class="hash-link" href="#general-configuration-structure" title="Direct link to heading">#</a></h2><p>The authentication test plugin is based on <a href="https://rocket.rs" target="_blank" rel="noopener noreferrer">Rocket</a>, and its configuration system is based on the system provided by Rocket. We will describe here the properties needed by an end user, a complete overview can be found in <a href="https://rocket.rs/master/guide/configuration/" target="_blank" rel="noopener noreferrer">the rocket documentation</a>.</p><p>This configuration system is based on 3 tiers:</p><ul><li>Defaults baked into the server</li><li>Configuration provided through the configuration file specified in the <code>ROCKET_CONFIG</code> environment variable (or the default filename <code>Rocket.toml</code>)</li><li>Configuration overrides provided through environment variables with names starting with <code>ROCKET_</code>.</li></ul><p>Within these structures, defaults have the lowest priority (are used only when no other source defines that particular setting), and environment variables have the highest priority (always override whatever value the other layers have for a setting).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="profiles"></a>Profiles<a class="hash-link" href="#profiles" title="Direct link to heading">#</a></h3><p>Within files, configuration is further namespaced in Profiles, which can be named by the person making the configuration. At runtime, the <code>ROCKET_PROFILE</code> environment variable can then be used to select which namespace to use for the actual configuration, allowing a combination of multiple configurations to be present within a single configuration file.</p><p>There are also 4 special configurations, described below, that act sligthly differently:</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="default"></a>default<a class="hash-link" href="#default" title="Direct link to heading">#</a></h4><p>The profile <code>default</code> is used to provide configuration values as fallbacks for the selected profile. If the selected profile doesn&#x27;t specify a configuration parameter, the value provided in the <code>default</code> profile is used when available.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="global"></a>global<a class="hash-link" href="#global" title="Direct link to heading">#</a></h4><p>The profile <code>global</code> is the oposite to <code>default</code>. Settings provided in <code>global</code> always override no matter what the selected profile contains.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="debug"></a>debug<a class="hash-link" href="#debug" title="Direct link to heading">#</a></h4><p>The profile <code>debug</code> is the default selected profile used on debug builds of the core server (which occurs e.g. when starting the server with <code>cargo run</code>), when no profile is specified through <code>ROCKET_PROFILE</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="release"></a>release<a class="hash-link" href="#release" title="Direct link to heading">#</a></h4><p>The profile <code>release</code> is the default selected profile used on release builds of the core server, when no profile is specified through <code>ROCKET_PROFILE</code>. This will be the default for prebuilt binaries when these become availble.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="configuration-file-format"></a>Configuration file format<a class="hash-link" href="#configuration-file-format" title="Direct link to heading">#</a></h3><p>Any provided configuration file is interpreted as <a href="https://toml.io" target="_blank" rel="noopener noreferrer">TOML</a>. This is a configuration file format somewhat similar to INI files, but with a more constrained specification. For example:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-toml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[debug]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">port = 8001</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">address = &quot;127.0.0.1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[release]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">port = 80</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Is a configuration file that sets the parameters <code>port</code> and <code>address</code> for the debug profile, and only <code>port</code> for the release profile.</p><p>Some configuration options described below may require values more complicated than a string or a number. In those cases, specific descriptions on how to use those options is given there.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="basic-configuration"></a>Basic configuration<a class="hash-link" href="#basic-configuration" title="Direct link to heading">#</a></h2><table><thead><tr><th>key</th><th>environment variable</th><th>description</th><th>default</th></tr></thead><tbody><tr><td>address</td><td>ROCKET_ADDRESS</td><td>IP address for server to use</td><td><code>127.0.0.1</code></td></tr><tr><td>port</td><td>ROCKET_PORT</td><td>Port for server to listen on</td><td><code>8000</code></td></tr><tr><td>server_url</td><td>ROCKET_SERVER_URL</td><td>URL on which the server is reachable</td><td></td></tr><tr><td>internal_url</td><td>ROCKET_INTERNAL_URL</td><td>URL on which the server can be reached by other ID Contact components</td><td></td></tr><tr><td>workers</td><td>ROCKET_WORKERS</td><td>Number of threads to use for serving responses</td><td>cpu core count</td></tr><tr><td>keep_alive</td><td>ROCKET_KEEP_ALIVE</td><td>HTTP persistence keep alive timeout</td><td><code>5</code></td></tr><tr><td>log_level</td><td>ROCKET_LOG_LEVEL</td><td>Log level (<code>off</code>/<code>critical</code>/<code>normal</code>/<code>debug</code>)</td><td><code>normal</code></td></tr></tbody></table><p>The <code>port</code> and <code>address</code> parameters together determine the interface on which the server will listen for responses. The <code>server_url</code> parameter indicates via which URL the server can be reached by external parties. This can be different than the <code>address</code>, <code>port</code> configuration, and even include a path prefix. The internal URL specifies the URL on which other components of the ID Contact system can find this plugin. This may be different from the external URL.</p><p><code>workers</code> and <code>keep_alive</code> influence the resource utilization of the server. For most use cases, the default values will be fine, but if neccessary these can be tuned.</p><p>The amount of logging done by the server is determined through the <code>log_level</code> parameter. The values listed give progressively more detailed information.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="plugin-behaviour"></a>Plugin behaviour<a class="hash-link" href="#plugin-behaviour" title="Direct link to heading">#</a></h2><table><thead><tr><th>key</th><th>environment variable</th><th>description</th><th>default</th></tr></thead><tbody><tr><td>use_attr_url</td><td>ROCKET_USE_ATTR_URL</td><td>Whether or not to use a separate attribute URL for transfering authentication results</td><td><code>true</code></td></tr></tbody></table><p>ID Contact allows for two methods of transfering the authentication result to the communication plugin:</p><ul><li>Out of band, through a separate attribute URL</li><li>In band, as part of the URL the end user opens to start the communication session.
The <code>use_attr_url</code> setting indicates which method this plugin should choose to use.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="cryptographic-keys"></a>Cryptographic keys<a class="hash-link" href="#cryptographic-keys" title="Direct link to heading">#</a></h2><table><thead><tr><th>key</th><th>environment variable</th><th>description</th><th>default</th></tr></thead><tbody><tr><td>decryption_privkey</td><td>ROCKET_DECRYPTION_PRIVKEY</td><td>Private key used for decrypting authentication results</td><td></td></tr><tr><td>signature_pubkey</td><td>ROCKET_SIGNATURE_PUBKEY</td><td>Public key used for verifying the signature on authentication results</td><td></td></tr></tbody></table><p>These encryption parameters consists of the following subkeys specifying the actual key type and key material</p><table><thead><tr><th>key</th><th>description</th></tr></thead><tbody><tr><td>type</td><td>What type of key this is (<code>RSA</code> for RSA keys, <code>EC</code> for eliptic curve keys)</td></tr><tr><td>key</td><td>PEM encoding of the actual key</td></tr></tbody></table><p>In a configuration file, this results in the following configuration for an RSA encryption key:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-toml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[global.signature_pubkey]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type = &quot;RSA&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">key = &quot;&quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-----BEGIN PUBLIC KEY-----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA5/wRrT2T4GGvuQYcWjLr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/lFe51sTV2FLd3GAaMiHN8Q/VT/XEhP/kZ6042l1Bj2VpZ2yMxv294JKwBCINc34</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">8VLYd+DfkMnJ4yX9LZHK2Wke6tCWBB9mYgGjMwCNdXczbl96x1/HevaTorvk91rz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Cvzw6vV08jtprAyN5aYMU4I0/cVJwi03bh/skraAB110mQSqi1QU/2z6Hkuf7+/x</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/bACxviWCyPCd/wkXNpFhTcRlfFeyKcy0pwFx1OLCDJ1qY7oU+z1wcypeOHeiUSx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">riSHlWaT24ke+J78GGVmnCZdu/MRuun5hvgaiWxnhIBmExJY6vRuMlwkbRqOft5Q</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TQIDAQAB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-----END PUBLIC KEY-----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;&quot;&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/configuration/auth_test"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Authentication test plugin configuration options</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#general-configuration-structure" class="table-of-contents__link">General configuration structure</a><ul><li><a href="#profiles" class="table-of-contents__link">Profiles</a></li><li><a href="#configuration-file-format" class="table-of-contents__link">Configuration file format</a></li></ul></li><li><a href="#basic-configuration" class="table-of-contents__link">Basic configuration</a></li><li><a href="#plugin-behaviour" class="table-of-contents__link">Plugin behaviour</a></li><li><a href="#cryptographic-keys" class="table-of-contents__link">Cryptographic keys</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/auth/overview">Authentication plugins</a></li><li class="footer__item"><a class="footer__link-item" href="/comm/overview">Communication plugins</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Tweede Golf. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.86abdcb7.js"></script>
<script src="/runtime~main.61a81c9d.js"></script>
<script src="/main.f777b766.js"></script>
<script src="/2.0732aa58.js"></script>
<script src="/3.71af52dc.js"></script>
<script src="/27.af86968c.js"></script>
<script src="/935f2afb.fed1a0dc.js"></script>
<script src="/17896441.30863bfd.js"></script>
<script src="/787f56f8.284e992b.js"></script>
</body>
</html>